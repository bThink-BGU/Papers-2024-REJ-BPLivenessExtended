# -*- coding: utf-8 -*-
"""task3.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1i05U7S9LuriwTXAsHRCavGFZEMFk3dm5
"""

# Don't touch this b-thread
@thread
def bt_1():
    for i in range(5):
        yield {waitFor: [Up, Down, Left, Right]}
    yield {block: [Up, Down, Left, Right]}

# Enter your solution below
@thread
def bt_2():
    # Track the robot's position and move count
    move_count = 0
    visited_g = False

    while True:
        # Wait for the position update
        location = yield {waitFor: AnyAt}

        # Increment move count
        move_count += 1

        # Check if the robot is at (2,3) which is the goal location
        if location == At23:
            visited_g = True

        # Check if the robot is at (3,3)
        if location == At33:
            visited_r = True

        # If 5 moves are reached
        if move_count == 5:
            if visited_g and visited_r:
                # Allow normal move
                yield {request: [Up, Down, Left, Right]}
            else:
                # Block moves if the goal (2,3) has not been reached
                yield {block: [Up, Down, Left, Right]}
        else:
            # Allow normal move if less than 5 moves have been made
            yield {request: [Up, Down, Left, Right]}